<!-- ... existing code ... -->
                    <div>
                        <h1 class="text-3xl font-bold text-slate-800 tracking-tight hidden lg:block">Dashboard</h1>
                        <p class="text-slate-500 mt-1">ยินดีต้อนรับ, คุณน็อต!</p>
                    </div>
                    <button id="create-order-btn" class="mt-4 sm:mt-0 w-full sm:w-auto flex-shrink-0 text-white bg-sky-500 hover:bg-sky-600 font-medium rounded-lg text-sm px-6 py-3 text-center transition-colors shadow-lg shadow-sky-500/30 flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" /></svg>
                        สร้างออเดอร์ใหม่
                    </button>
                </header>

                <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10">
<!-- ... existing code ... -->
                    <div class="lg:col-span-1 space-y-8">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h2 class="text-xl font-semibold text-slate-700 mb-4">ออเดอร์ล่าสุด</h2><div id="recent-orders-container" class="space-y-3"><p class="text-slate-500 text-center py-8">กำลังโหลด...</p></div></div>
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h2 class="text-xl font-semibold text-slate-700 mb-4">สินค้าใกล้หมด (<=10)</h2><div id="low-stock-container" class="space-y-3"><p class="text-slate-500 text-center py-8">กำลังโหลด...</p></div></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Order Type Selection Modal -->
    <div id="order-type-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div id="modal-panel" class="bg-white rounded-2xl shadow-2xl w-full max-w-lg transform transition-all opacity-0 scale-95">
            <div class="p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold text-slate-800">เลือกประเภทออเดอร์</h2>
                    <button id="close-modal-btn" class="text-slate-400 hover:text-slate-600">&times;</button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-semibold text-slate-700 mb-3 text-lg border-b pb-2">ประเภทสร้อยคอ</h3>
                        <div class="space-y-2">
                            <a href="new-order.html?type=necklace-ring" class="modal-option-link">สร้อยคอแบบวงแหวน</a>
                            <a href="new-order.html?type=necklace-stone-round" class="modal-option-link">สร้อยคอแบบหินกลม (6-9 เม็ด)</a>
                            <a href="new-order.html?type=necklace-stone-mixed" class="modal-option-link">สร้อยคอแบบหินผสม (หินกลม+หินแตก)</a>
                        </div>
                    </div>
                    <div>
                        <h3 class="font-semibold text-slate-700 mb-3 text-lg border-b pb-2">ประเภทกำไล</h3>
                        <div class="space-y-2">
                            <a href="new-order.html?type=bracelet-1-2" class="modal-option-link">กำไล หิน 1-2 เม็ด</a>
                            <a href="new-order.html?type=bracelet-3-4" class="modal-option-link">กำไล หิน 3-4 เม็ด</a>
                            <a href="new-order.html?type=bracelet-5-plus" class="modal-option-link">กำไล หิน 5 เม็ดขึ้นไป</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style>
        .modal-option-link {
            display: block;
            padding: 12px 16px;
            border-radius: 8px;
            background-color: #f8fafc; /* slate-50 */
            color: #475569; /* slate-600 */
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            border: 1px solid #e2e8f0; /* slate-200 */
        }
        .modal-option-link:hover {
            background-color: #e0f2fe; /* sky-100 */
            color: #0c4a6e; /* sky-800 */
            border-color: #7dd3fc; /* sky-300 */
            transform: translateX(4px);
        }
        #close-modal-btn {
            font-size: 2.5rem;
            line-height: 1;
            font-weight: 300;
        }
    </style>

    <script src="layout.js" type="module"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
// ... existing code ... -->
        }

        fetchDashboardData();

        // Modal Logic
        const createOrderBtn = document.getElementById('create-order-btn');
        const modal = document.getElementById('order-type-modal');
        const modalPanel = document.getElementById('modal-panel');
        const closeModalBtn = document.getElementById('close-modal-btn');

        const openModal = () => {
            modal.classList.remove('hidden');
            setTimeout(() => {
                modalPanel.classList.remove('opacity-0', 'scale-95');
                modalPanel.classList.add('opacity-100', 'scale-100');
            }, 10);
        };

        const closeModal = () => {
            modalPanel.classList.remove('opacity-100', 'scale-100');
            modalPanel.classList.add('opacity-0', 'scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 200);
        };

        createOrderBtn.addEventListener('click', openModal);
        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

    </script>
</body>
</html>
